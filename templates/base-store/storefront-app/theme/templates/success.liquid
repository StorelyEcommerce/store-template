{% assign page_title = 'Order Success' %}
{% assign session_id = request.params.session_id %}

<div style="min-height: 100vh; padding-top: 5rem; display: flex; align-items: center; justify-content: center;">
  <div style="max-width: 28rem; margin: 0 auto; padding: 0 1rem; text-align: center;">
    <!-- Success Animation -->
    <div style="position: relative; margin-bottom: 2rem;">
      <div style="position: absolute; inset: 0; background: rgba(16, 185, 129, 0.2); border-radius: 50%; filter: blur(40px); animation: pulse 2s infinite;"></div>
      <div style="position: relative; width: 6rem; height: 6rem; margin: 0 auto; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 40px rgba(16, 185, 129, 0.25);">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
      </div>
    </div>

    <h1 style="font-size: 1.5rem; font-family: 'Fraunces', Georgia, serif; color: #2d2924;">
      Thank you for your order!
    </h1>
    <p style="margin-top: 1rem; color: #4a443d;">
      Your payment was successful. We've sent a confirmation email with your order details.
    </p>

    {% if session_id != blank %}
      <div style="margin-top: 1.5rem; padding: 1rem; background: #f5f1eb; border: 1px solid #e8e2d9; border-radius: 0.75rem;">
        <p style="font-size: 0.75rem; color: #6b635a; margin-bottom: 0.25rem;">Order Reference</p>
        <p style="font-family: 'JetBrains Mono', monospace; font-size: 0.875rem; color: #2d2924; word-break: break-all;">{{ session_id }}</p>
      </div>
    {% endif %}

    <!-- What's Next -->
    <div style="margin-top: 2.5rem; padding: 1.5rem; background: #f5f1eb; border: 1px solid #e8e2d9; border-radius: 1rem; text-align: left;">
      <h2 style="font-size: 0.875rem; font-weight: 600; color: #2d2924; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#d95f3d" stroke-width="2">
          <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <path d="M16 10a4 4 0 0 1-8 0"></path>
        </svg>
        What's next?
      </h2>
      <ul style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 0.75rem; font-size: 0.875rem; color: #4a443d;">
        <li style="display: flex; align-items: flex-start; gap: 0.75rem;">
          <span style="width: 1.5rem; height: 1.5rem; background: rgba(217, 95, 61, 0.1); color: #d95f3d; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 0.75rem; font-weight: 500;">1</span>
          <span>You'll receive an email confirmation shortly</span>
        </li>
        <li style="display: flex; align-items: flex-start; gap: 0.75rem;">
          <span style="width: 1.5rem; height: 1.5rem; background: rgba(217, 95, 61, 0.1); color: #d95f3d; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 0.75rem; font-weight: 500;">2</span>
          <span>We'll process and ship your order</span>
        </li>
        <li style="display: flex; align-items: flex-start; gap: 0.75rem;">
          <span style="width: 1.5rem; height: 1.5rem; background: rgba(217, 95, 61, 0.1); color: #d95f3d; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 0.75rem; font-weight: 500;">3</span>
          <span>Track your package with the shipping confirmation</span>
        </li>
      </ul>
    </div>

    <!-- Actions -->
    <div style="margin-top: 2rem; display: flex; flex-direction: column; gap: 1rem; justify-content: center;">
      <a href="/products" class="btn btn-primary">
        Continue Shopping
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </a>
    </div>
  </div>
</div>

<script>
  // Clear cart after successful checkout
  if (window.CartAPI) {
    window.CartAPI.clearCart().then(() => {
      updateCartCount();
    });
  }
</script>
